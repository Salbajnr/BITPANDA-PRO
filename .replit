modules = ["nodejs-20", "bash", "web"]
[agent]
expertMode = true

[nix]
channel = "stable-25_05"

[workflows]
runButton = "Project"

[[workflows.workflow]]
name = "Project"
mode = "parallel"
author = "agent"

[[workflows.workflow.tasks]]
task = "workflow.run"
args = "Development Server"

[[workflows.workflow]]
name = "Development Server"
author = "agent"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "npm run dev"
waitForPort = 5000

[workflows.workflow.metadata]
outputType = "webview"

[[workflows.workflow]]
name = "Production Build Test"
author = 50271991
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "npm run install:all"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "npm run build"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"‚úÖ Production build completed successfully!\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üì¶ Client build is in client/dist/\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üöÄ Ready for deployment!\""

[[workflows.workflow]]
name = "Pre-Deployment Check"
author = 50271991
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üîç Running pre-deployment checks...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "npm run install:all"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "npm run build"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"‚úÖ Build completed successfully!\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üìã Deployment Checklist:\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"  1. Set all required environment variables in Secrets\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"  2. DATABASE_URL (PostgreSQL connection)\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"  3. COOKIE_SECRET, SESSION_SECRET, JWT_SECRET\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"  4. Optional: COINGECKO_API_KEY, NEWS_API_KEY, SENDGRID_API_KEY\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üöÄ Ready to deploy! Click 'Deploy' button to publish your app.\""

[[ports]]
localPort = 3000
externalPort = 3000

[[ports]]
localPort = 5000
externalPort = 80

[[ports]]
localPort = 42191
externalPort = 3001

[deployment]
deploymentTarget = "autoscale"
build = ["sh", "-c", "npm run install:all && npm run build"]
run = ["sh", "-c", "npm start"]
